
                           PC-SIG #216 

     Thió floppù containó á seô oæ utilitù routines¬ batcè files¬ 
anä programó thaô É wrotå whilå learninç abouô thå IBM-PÃ anä thå 
"C¢ programminç lanquage®  Sincå thió waó á learninç experiencå 
foò må É wilì noô guaranteå thaô theù arå efficienô oò buç freå 
thougè É havå trieä verù harä tï makå theí thaô way®	É woulä 
bå mosô interesteä iî anù additionó oò improvementó thaô anyonå 
mighô makå tï theså routines.

   Alsï notå thaô theså routineó werå writteî iî thå followinç 
environment:

		IBM-PC		256K		Monochrome screen
		Epson MX-100 parallel printer
		2 Serial ports
		2 DS/SD floppy disk drives
 
     Somå oæ theså routineó havå beeî porteä tï thå IBM-PÃ azteã 
"C¢ undeò Concurrenô CP/Í anä tï á VAØ 11/78° undeò VMÓ witè 
minimaì modifications®  Obviouslù thå DOÓ functionó anä 808¸ 
assembleò routineó didn'ô porô welì buô thå "C¢ codå needeä 
almosô nï changes.


				LEIGÈ CUTHBERTSON
				1868 S. PERRY WAY
				DENVER, CO  80219

                                April 1984
    
notes about some of the files on this disk -

*.C and *.ASM files

     Theù arå utilitù subroutineó writteî iî MICROSOFÔ "C"®  
Theså utilitieó includå á menõ system¬ cursoò anä screeî controì 
(usinç DOÓ oò direcô tï BIOS)¬ juliaî anä gregoriaî date/timå 
routines¬ anä "C¢ callablå assembleò routineó thaô issuå BIOÓ 
interrupts®  NOTÅ - thå DOÓ cursoò anä screeî controì utilitieó 
requirå DEVICE=ANSI.SYÓ commanä linå bå iî thå CONFIG.SYÓ file®  
Thå BIOÓ cursoò anä screeî controló dï noô requirå this.


communications program (IBMTTY.C)

     Thió prograí ió á terminaì emulation/communicationó prograí 
writteî iî MICROSOFÔ "C"®  Iô ió usablå buô noô recommendeä foò 
uså becouså oæ useò unfriendlynesó anä á higè erroò rate®  Itó 
maiî reasoî foò inclusioî ió aó aî examplå oæ uså oæ thå variouó 
utilitù subroutineó iî thå \utiì subdirectory®  Iô alsï provideó 
aî examplå oæ direcô controì oæ thå IBÍ seriaì communicationó 
board.
Š
Batch files (*.BAT)

     Theså batcè fileó emulatå somå oæ thå mosô commoî UNIØ 
commandó oî thå IBM-PC®  Thå compileò anä linkeò batcè fileó arå 
seô uğ foò thå MICROSOFÔ "C¢ compileò anä linker®  Tï uså theså 
batcè fileó iô ió recommendeä tï seô uğ á PATÈ commanä iî 
AUTOEXEC.BAÔ tï includå thió subdirectorù anä thå compileò 
subdirectorù iî thå searcè path®  
     ex® (A¾ PATÈ a:\;a:\unix;a:\compiler).



                              **ª biosio.así ***

MICROSOFÔ "C¢ callablå 808¸ assemblù routineó thaô interfacå 
directlù witè thå basiã I/Ï systeí (BIOS).


                             **ª KEYBOARÄ I/Ï ***
ã ½ keyrd()»	    Reaä á keyboarä entrù - waiô foò entrù iæ onå noô ready.
iret ½ keyhit()»    Seå iæ therå ió á characteò iî thå keyboarä buffer.
iret = keyshif();   See what the shift key status is.


                              *** VIDEO I/O ***
biosini(stype);	    Initialize screen I/O using the BIOS set mode call
biosset(irow,icol); Set the current cursor position.
iret = biospos();   Return the current cursor postion.
biosup(numlines,trow,tlcol,brow,brcol,fchar);
	            Scroll the screen up within a defined window.
biosdwn(numlines,trow,tlcol,brow,brcol,fchar);
	            Scroll the screen down within a defined window.
iret=biosrca();	    Read the contents of a given screen cell.
bioswca(char,count,att)» Writå á characteò tï thå screeî - witè attributes.
bioswc(char,count); Write a character to the screen - no attributes.
bioswd(irow,icol);  Write a dot in graphics mode.
biostty(c);	    Writå á characteò tï thå screeî usinç thå BIOÓ ascié 
                    teletypå call®  Thå teletypå calì wilì senä cr/læ iæ 
                    columî 7¹ ió writteî tï (0-79)®  Iô wilì scrolì thå screeî 
                    uğ iæ ro÷ 2´ (0-24© columî 7¹ ió writteî to®  Iô wilì alsï 
                    beeğ thå belì iæ ^ç ió receiveä anä providå á destructivå 
                    backspace.
iret = bioscur();   Return the current video state of the screen.


                         *** communications port ***
iret = comini(port,params);   Initialize the communications port.
iret = comout(port,c);   Write a character to the communications port.

c = comin(port);    Reaä á characteò froí thå communicationó port®  Waitó foò 
                    characteò iæ onå ió noô ready®  Seå \comm\ibmtty.ã foò 
                    examplå oæ pollinç comí porô foò characteò withouô wait.
iret = comstat(port)»    Checë thå linå anä modeí status
Š
			*** io.asm ***
     IBM-PÃ 808¸ assemblù foò interfacå witè microsofô "C¢ undeò 
PC-DOÓ "C¢ callablå subroutineó thaô providå absolutå pointeò 
addressing®  Pointeró withiî á IBM-PÃ microsofô "C¢ prograí arå 
relativå tï thå starô oæ thå programó datá segment®  Theså 
subroutineó providå á mechanisí tï addresó absolutå memorù 
locations®  Supplieä bù microsofô - commenteä bù L® Cuthbertson¬ 
Apriì 1984

c = readabs(loc);   Read an absolute memory location.
writeabs(loc,c);    Write an absolute memory location.


scontrol.è     Headeò filå useä bù thå screeî anä keyboarä controì librarù 
     thaô defineó thå variouó commands®  Thå extendeä screeî anä keyboarä 
     devicå driveò musô bå configureä intï DOÓ beforå theså commandó wilì 
     work®                                                        */

curup.c        Moves the cursor up y relative lines.
curdown.ã      Movås thå cursoò dowî ù relativå lines®
curfor.c       Moves the cursor forward x relative columns.
curback.ã      Movås thå cursoò backwarä ø relativå columns®
cursor.ã       Movås thå cursoò tï á specifiã r,ã co-ordinate®
reads.ã        Readó á strinç froí stdin®  Returnó thå numbeò oæ characteró 
     entereä includinç thå NULÌ byte® 
readc.ã        Readó á characteò tï thå screeî usinç á DOÓ function®  
writec.ã       Writeó á characteò tï thå screeî usinç á DOÓ function® 
writes.ã       Writås á strinç tï stdout®
eline.c        Erases a line of the screen.
                    0 = Erase from cursor to end of line.
                    1 = Erase from start of screen to cursor.
                    2 = Erase entire line containing cursor.
scrinit.ã      Initializeó thå screeî anä keyboarä controì arrays®  Currentlù 
     ió onlù á dummù functioî gettinç itó informatioî froí á headeò filå 
     (scontrol.h).
scratt.ã       Turnó oî anä ofæ iî á togglå switcè manneò variouó screeî 
     attributeó sucè aó BOLD¬ blink¬ reverså video¬ etc®  
frame.ã        Drawó á boø giveî thå uppeò lefô corneò anä thå loweò righô 
     corner®  Useó thå extendeä characteò seô - graphicó boarä noô needed®  
     Useó direcô BIOÓ calls®  
getline.ã      Readó á recorä froí á filå intï á string®  Returnó thå lengtè 
     oæ thå strinç includinç thå NULL¬ aî EOÆ iæ EOÆ ió reached¬ oò á -± iæ aî 
     erroò occured.


dosdate.así    Microsofô "C¢ callablå 808¸ assemblù routinå thaô useó á DOÓ 
     functioî calì tï obtaiî anä returî thå month¬ day¬ anä yeaò aó integers.
jtog.ã         Convertó á juliaî datå (± ½ 1sô daù AD© intï á gregoriaî datå 
     iî thå formaô mm/dd/yy®  
jtoj.ã         Returnó thå juliaî datå (± ½ 1sô daù AD© associateä witè thå 
     juliaî datå iî thå forí (yddd)®  
gtoj.ã         Returnó thå juliaî datå (± ½ 1sô daù AD© associateä witè á 
     gregoriaî datå iî thå forí mm/dd/yy®  
weekday.ã      Determineó thå daù oæ thå weeë á giveî gregoriaî datå falló on® Šcvtdate.ã      Checkó anä convertó á "packed¢ gregoriaî datå (1/1/83© intï itó 
     "expanded¢ forí (01/01/83)®  


ibmtty.ã       Terminaì emulatioî prograí witè filå uploaä anä downloaä 
     capabilities®  Optimizeä tï communicatå witè á DEÃ VAØ 11/780®


mencon.ã       Openó á menõ filå anä displaù iô oî thå screen®  Returnó thå 
     numbeò oæ entrù fieldó founä oî thå menõ (nfield© oò -± iæ aî erroò 
     occured®  Placeó thå r,ã coordinateó oæ thå entrù fieldó withiî thå 
     globallù declareä rã array.
          Tï builä á menu¬ uså thå texô editoò tï creatå á filå calleä 
     xxxx.mnõ   Thió filå containó thå menõ tesô aó iô shoulä appeaò oî thå 
     screen®  Thå screeî ió noô automaticallù eraseä wheî menuó arå displayeä 
     tï allo÷ foò overlaying®  Commanä lineó controì thå variouó displaù 
     parameters®  Seå \comm\comm.mnõ foò á menõ texô examplå anä 
     \comm\ibmtty.ã foò á menõ calì example®  
chosit.ã       Displayó á menu¬ prompô foò á response¬ anä validate®  Calló 
     functioî mencoî tï displaù thå menu®  

pause.ã        Causeó á prograí tï appeaò tï pauså foò á giveî perioä oæ time®  
     Useó thå systeí clocë foò timing®  Accuratå tï 1/100'ó oæ á second.

